{{page-title this.model.title}}
<div class="relative show-poster w-full flex space-x-2">
  <div class="w-1/2">
    <div style="background-image: url({{this.model.imageUrl}})" alt={{this.model.title}} class="w-full h-full show-image bg-top bg-cover"></div>
    <div class="show-info">
      {{#if (includes this.currentUser.user this.model.users)}}
        <div class="my-2">
          <LinkTo
            @route="home.user.my-shows.edit"
            @model={{this.model}}
            class="cool-button absolute top-0 right-0"
          >
            EDIT
          </LinkTo>
        </div>
      {{/if}}
      <h1 class="font-cursive text-3xl">
        {{this.model.title}}
      </h1>
      {{#if this.model.repeating}}
        <h2 class="text-xl uppercase">
          {{this.model.formattedRecurringInterval}}
        </h2>
      {{/if}}
      {{#if this.model.users.length}}
        <h2>
          {{t "show.hosted_prefix"}}
          {{#each this.model.users as |host|}}
            <div>
              <img
                class="inline rounded-lg"
                style="height: 2rem;"
                src="{{host.avatarUrl}}"
                align="center"
                alt={{host.username}} / >
            </div>
            <span class="font-cursive text-xl">
              <LinkTo @route="home.dj" @model={{host.username}}>
                {{host.username}}
              </LinkTo>
            </span>
          {{/each}}
        </h2>
      {{/if}}
      {{#if this.model.repeating}}
        <h3 class="modal-title uppercase" id="myModalLabel">
          Every {{this.model.formattedCadence}} at {{format-time this.model.startTime}}
        </h3>
      {{/if}}
      <p>
        <ShowSeries::Description @description={{this.model.description}} />
      </p>
    </div>
    <div class="p-2">
      {{#each this.model.labels as |label|}}
        <a
          class="track-label
            text-df-yellow
            classic:bg-df-pink
            blm:bg-black
            hover:text-white
            p-1
            uppercase
            border-solid
            border-white
            border-2
            p-x-2
            font-extrabold"
          href="#">
          {{label.name}}
        </a>
      {{/each}}
    </div>
  </div>
  <div class="w-1/2 p-2">
    <h1 class="text-2xl">
      {{t "show.episodes"}}
    </h1>
    {{#if this.model}}
      <Await @promise={{this.fetchEpisodes}} as |await|>
        <await.Pending>
          Loading episodes...
        </await.Pending>

        <await.Fulfilled as |episodes|>
          {{#each episodes as |episode|}}
            <ShowEpisodeCard @episode={{episode}} />
          {{/each}}
        </await.Fulfilled>

        <await.Rejected>
          Something went wrong :(
        </await.Rejected>
      </Await>
    {{/if}}
  </div>
</div>